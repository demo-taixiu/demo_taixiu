<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TÃ i Xá»‰u</title>
<link rel="stylesheet" href="style.css">

<style>
.game-box{
    text-align:center;
    padding:20px;
}

.dice{
    font-size:50px;
    margin:15px 0;
    letter-spacing:10px;
}

.bet-box input{
    padding:10px;
    border-radius:10px;
    border:none;
    width:150px;
    text-align:center;
    font-size:16px;
}

.result{
    margin-top:15px;
    font-weight:bold;
    font-size:18px;
}
</style>
</head>
<body onload="updateHeader()">

<div class="header">
    <div class="logo">ğŸ² TÃ€I Xá»ˆU</div>
    <div>
        ğŸ’° <span id="balance"></span><br>
        <span class="vip">VIP <span id="vip"></span></span>
    </div>
</div>

<div class="game-box">

    <div class="dice" id="dice">ğŸ² ğŸ² ğŸ²</div>

    <div class="bet-box">
        <input type="number" id="betAmount" placeholder="Nháº­p tiá»n cÆ°á»£c">
    </div>

    <div style="margin-top:15px;">
        <button class="btn gold" onclick="play('tai')">TÃ€I (11-17)</button>
        <button class="btn gold" onclick="play('xiu')">Xá»ˆU (4-10)</button>
    </div>

    <div class="result" id="result"></div>

</div>

<div class="nav">
    <a href="index.html">ğŸ <br>Trang chá»§</a>
    <a href="account.html">ğŸ‘¤<br>TÃ i khoáº£n</a>
</div>

<script src="app.js"></script>

<script>
function rollDice(){
    return Math.floor(Math.random()*6)+1;
}

function play(choice){
    let bet = parseInt(document.getElementById("betAmount").value);

    if(!bet || bet<=0){
        alert("Nháº­p tiá»n cÆ°á»£c");
        return;
    }

    if(bet>balance){
        alert("KhÃ´ng Ä‘á»§ tiá»n");
        return;
    }

    // Animation giáº£ láº­p
    let diceDiv = document.getElementById("dice");
    let count = 0;

    let rolling = setInterval(()=>{
        diceDiv.innerHTML = 
        rollDice()+" ğŸ² "+
        rollDice()+" ğŸ² "+
        rollDice();
        count++;
        if(count>10){
            clearInterval(rolling);
            finishGame(choice, bet);
        }
    },100);
}

function finishGame(choice, bet){
    let d1 = rollDice();
    let d2 = rollDice();
    let d3 = rollDice();
    let total = d1+d2+d3;

    document.getElementById("dice").innerHTML = d1+" ğŸ² "+d2+" ğŸ² "+d3;

    let resultType = (total>=11 && total<=17) ? "tai" : "xiu";

    if(choice===resultType){
        balance += bet;
        document.getElementById("result").innerHTML =
        "ğŸ‰ Tháº¯ng! Tá»•ng: "+total+" +"+bet;
    }else{
        balance -= bet;
        document.getElementById("result").innerHTML =
        "âŒ Thua! Tá»•ng: "+total+" -"+bet;
    }

    vip = Math.floor(balance/2000000)+1;

    save();
    updateHeader();
}
</script>

</body>
</html>
