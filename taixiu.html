<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TÃ i Xá»‰u Casino Pro</title>

<style>
body{
    margin:0;
    font-family:Arial;
    background:radial-gradient(circle,#1e4d2b,#0c1f13);
    color:white;
    overflow-x:hidden;
}

/* HEADER */
.topbar{
    display:flex;
    justify-content:space-between;
    padding:10px;
    background:#111;
    font-size:14px;
}

/* ONLINE */
.online{
    text-align:center;
    font-size:13px;
}

/* TIMER */
.timer{
    text-align:center;
    font-size:24px;
    font-weight:bold;
}
.timer.red{color:red}

/* BOARD */
.board{
    display:flex;
    justify-content:space-around;
    margin-top:10px;
}

.side{
    width:45%;
    padding:20px;
    text-align:center;
    border-radius:15px;
    font-size:22px;
    font-weight:bold;
    cursor:pointer;
}

.tai{background:#b30000;}
.xiu{background:#0033cc;}

.side.active{
    box-shadow:0 0 20px gold;
}

/* DICE 3D */
.dice-area{
    text-align:center;
    margin:20px 0;
    perspective:600px;
}
.dice{
    display:inline-block;
    font-size:50px;
    margin:0 10px;
    transition:transform 1s;
}

/* CHIP */
.chips{
    position:fixed;
    bottom:0;
    width:100%;
    background:#111;
    display:flex;
    justify-content:center;
    flex-wrap:wrap;
    padding:10px;
    gap:8px;
}
.chip{
    background:gold;
    color:black;
    padding:8px 12px;
    border-radius:50px;
    font-weight:bold;
    cursor:pointer;
}
.chip.active{background:red;color:white}

/* EFFECT 60:1 */
.win60{
    position:fixed;
    top:0;left:0;
    width:100%;height:100%;
    background:rgba(255,215,0,0.7);
    display:flex;
    justify-content:center;
    align-items:center;
    font-size:40px;
    font-weight:bold;
    color:#000;
    animation:flash 0.3s infinite alternate;
}
@keyframes flash{
    from{opacity:0.7;}
    to{opacity:1;}
}
</style>
</head>
<body>

<div class="topbar">
<div>ðŸ’° Sá»‘ dÆ°: <span id="balance">10000000</span></div>
<div>ðŸ’° Tá»•ng bÃ n: <span id="totalTable">0</span></div>
</div>

<div class="online" id="onlineBox"></div>

<div class="timer" id="timer">30</div>

<div class="board">
<div class="side tai" onclick="selectSide('tai',this)">TÃ€I (11-17)</div>
<div class="side xiu" onclick="selectSide('xiu',this)">Xá»ˆU (4-10)</div>
</div>

<div class="dice-area">
<span class="dice" id="d1">ðŸŽ²</span>
<span class="dice" id="d2">ðŸŽ²</span>
<span class="dice" id="d3">ðŸŽ²</span>
</div>

<!-- CHIP -->
<div class="chips" id="chips"></div>

<script>

let balance=10000000;
let selected=null;
let currentChip=0;
let totalBet=0;
let time=30;
let lockBet=false;
let stats=JSON.parse(localStorage.getItem("stats"))||[];

const chipValues=[5000,10000,50000,200000,500000,1000000,5000000,10000000,100000000];

// ===== CHIP =====
chipValues.forEach(val=>{
    let c=document.createElement("div");
    c.className="chip";
    c.innerText=format(val);
    c.onclick=()=>{
        document.querySelectorAll(".chip").forEach(x=>x.classList.remove("active"));
        c.classList.add("active");
        currentChip=val;
    }
    document.getElementById("chips").appendChild(c);
});

function format(n){
    if(n>=1000000) return (n/1000000)+"TR";
    if(n>=1000) return (n/1000)+"K";
    return n;
}

// ===== CHá»ŒN TÃ€I/Xá»ˆU =====
function selectSide(side,el){
    if(lockBet) return alert("ÄÃ£ khÃ³a cÆ°á»£c!");
    if(!currentChip) return alert("Chá»n chip!");

    document.querySelectorAll(".side").forEach(s=>s.classList.remove("active"));
    el.classList.add("active");

    selected=side;
    totalBet+=currentChip;

    document.getElementById("totalTable").innerText=
    (parseInt(document.getElementById("totalTable").innerText)+currentChip).toLocaleString();
}

// ===== TIMER =====
setInterval(()=>{
    time--;
    if(time<=5){
        lockBet=true;
        document.getElementById("timer").classList.add("red");
    }else{
        document.getElementById("timer").classList.remove("red");
    }

    if(time<=0){
        runGame();
        time=30;
        lockBet=false;
        totalBet=0;
        document.getElementById("totalTable").innerText="0";
        document.querySelectorAll(".side").forEach(s=>s.classList.remove("active"));
    }

    document.getElementById("timer").innerText=time;
},1000);

// ===== GAME =====
function roll(){return Math.floor(Math.random()*6)+1;}

function runGame(){
    let d1=roll(),d2=roll(),d3=roll();
    let total=d1+d2+d3;

    animateDice(d1,d2,d3);

    let win=false;

    if(selected=="tai" && total>=11) win=true;
    if(selected=="xiu" && total<=10) win=true;

    if(win){
        let payout=totalBet*1;
        balance+=payout;
        playWinSound();

        if(total==4||total==17){
            showWin60();
        }
    }else{
        balance-=totalBet;
    }

    document.getElementById("balance").innerText=balance.toLocaleString();

    stats.unshift(total>=11?"T":"X");
    localStorage.setItem("stats",JSON.stringify(stats));
}

// ===== 3D DICE =====
function animateDice(a,b,c){
    document.getElementById("d1").innerText=a;
    document.getElementById("d2").innerText=b;
    document.getElementById("d3").innerText=c;

    document.querySelectorAll(".dice").forEach(d=>{
        d.style.transform="rotateX(360deg) rotateY(360deg)";
        setTimeout(()=>{d.style.transform="rotateX(0deg)"},1000);
    });
}

// ===== EFFECT 60:1 =====
function showWin60(){
    let div=document.createElement("div");
    div.className="win60";
    div.innerText="ðŸ’¥ JACKPOT 60:1 ðŸ’¥";
    document.body.appendChild(div);
    setTimeout(()=>div.remove(),2000);
}

// ===== ONLINE 500 FAKE =====
setInterval(()=>{
    let count=450+Math.floor(Math.random()*50);
    document.getElementById("onlineBox").innerHTML=
    "ðŸ‘¥ "+count+" ngÆ°á»i online";
},2000);

// ===== SOUND =====
let bgMusic=new Audio("https://actions.google.com/sounds/v1/ambiences/casino.ogg");
bgMusic.loop=true;
bgMusic.volume=0.3;
document.body.onclick=()=>bgMusic.play();

function playWinSound(){
    let audio=new Audio("https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg");
    audio.play();
}

</script>
</body>
</html>
