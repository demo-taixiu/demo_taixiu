<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>T√†i X·ªâu PRO</title>
<link rel="stylesheet" href="style.css">

<style>
body{
    background:linear-gradient(#1e4d2b,#0f2c1a);
}

/* B√ÄN */
.board{padding:10px}

.grid{
    display:grid;
    grid-template-columns:repeat(7,1fr);
    gap:4px;
}

.cell{
    border:1px solid rgba(255,255,255,.3);
    text-align:center;
    padding:15px 5px;
    cursor:pointer;
    background:rgba(0,0,0,.2);
    font-weight:bold;
}

.cell small{
    display:block;
    opacity:.8;
}

.cell.active{
    background:gold;
    color:#000;
}

.dice-display{
    text-align:center;
    font-size:40px;
    margin:10px 0;
}

.history{
    margin-top:10px;
    font-size:14px;
}

.fake-players{
    font-size:12px;
    opacity:.8;
    margin-top:10px;
}
</style>
</head>

<body onload="updateHeader()">

<div class="header">
    <div class="logo">üé≤ T√ÄI X·ªàU PRO</div>
    <div>
        üí∞ <span id="balance"></span><br>
        VIP <span id="vip"></span>
    </div>
</div>

<div class="board">

<div class="dice-display" id="dice">üé≤ üé≤ üé≤</div>

<input type="number" id="betAmount"
placeholder="Nh·∫≠p ti·ªÅn c∆∞·ª£c"
style="width:100%;padding:10px;border-radius:8px;border:none;margin-bottom:10px;">

<!-- 1 2 3 X√öC X·∫ÆC -->
<div class="grid" id="specialGrid"></div>

<!-- T·ªîNG -->
<div class="grid" id="sumGrid"></div>

<div id="result" style="margin-top:10px;font-weight:bold;text-align:center"></div>

<div class="history">
üìä L·ªãch s·ª≠: <span id="history"></span>
</div>

<div class="fake-players" id="fakePlayers"></div>

</div>

<script src="app.js"></script>

<script>

// ====== D·ªÆ LI·ªÜU ======
const oddsSum={
4:60,5:30,6:18,7:12,8:8,9:7,10:6,
11:6,12:7,13:8,14:12,15:18,16:30,17:60
};

let selected=null;
let historyList=[];

// ====== T·∫†O √î 1-2-3 X√öC X·∫ÆC ======
const specialGrid=document.getElementById("specialGrid");

["1 X√∫c x·∫Øc 1:1","2 X√∫c x·∫Øc 2:1","3 X√∫c x·∫Øc 3:1"].forEach((text,i)=>{
    let div=document.createElement("div");
    div.className="cell";
    div.innerHTML=text;
    div.onclick=()=>selectBet("special"+(i+1),div);
    specialGrid.appendChild(div);
});

// ====== T·∫†O √î T·ªîNG ======
const sumGrid=document.getElementById("sumGrid");

for(let i=4;i<=17;i++){
    let div=document.createElement("div");
    div.className="cell";
    div.innerHTML=i+"<small>"+oddsSum[i]+":1</small>";
    div.onclick=()=>selectBet(i,div);
    sumGrid.appendChild(div);
}

function selectBet(type,element){
    document.querySelectorAll(".cell").forEach(c=>c.classList.remove("active"));
    element.classList.add("active");
    selected=type;
}

// ====== L·∫ÆC ======
function roll(){return Math.floor(Math.random()*6)+1;}

function startGame(){
    let bet=parseInt(document.getElementById("betAmount").value);
    if(!selected) return alert("Ch·ªçn c·ª≠a c∆∞·ª£c");
    if(!bet||bet<=0) return alert("Nh·∫≠p ti·ªÅn");
    if(bet>balance) return alert("Kh√¥ng ƒë·ªß ti·ªÅn");

    let diceDiv=document.getElementById("dice");
    let count=0;

    let anim=setInterval(()=>{
        diceDiv.innerHTML=roll()+" üé≤ "+roll()+" üé≤ "+roll();
        count++;
        if(count>30){
            clearInterval(anim);
            finishGame(bet);
        }
    },100);
}

function finishGame(bet){
    let d1=roll(),d2=roll(),d3=roll();
    let total=d1+d2+d3;
    document.getElementById("dice").innerHTML=
    d1+" üé≤ "+d2+" üé≤ "+d3;

    let win=0;

    if(typeof selected==="number"){
        if(total==selected) win=bet*oddsSum[selected];
    }else{
        if(selected=="special1" && (d1==d2||d1==d3||d2==d3)) win=bet*1;
        if(selected=="special2" && (d1==d2&&d2!=d3 || d1==d3&&d1!=d2 || d2==d3&&d2!=d1)) win=bet*2;
        if(selected=="special3" && d1==d2&&d2==d3) win=bet*3;
    }

    if(win>0){
        balance+=win;
        document.getElementById("result").innerHTML="üéâ Th·∫Øng +"+win;
    }else{
        balance-=bet;
        document.getElementById("result").innerHTML="‚ùå Thua -"+bet+" (Ra "+total+")";
    }

    vip=Math.floor(balance/2000000)+1;
    save();
    updateHeader();

    // L·ªäCH S·ª¨
    historyList.unshift(total);
    if(historyList.length>10) historyList.pop();
    document.getElementById("history").innerHTML=
    historyList.join(" - ");
}

// ====== GI·∫¢ L·∫¨P NG∆Ø·ªúI CH∆†I ======
function fakePlayers(){
    const names=["Minh","Huy","An","Long","Tu·∫•n","Khoa"];
    const randomName=names[Math.floor(Math.random()*names.length)];
    const randomBet=Math.floor(Math.random()*500000)+10000;
    document.getElementById("fakePlayers").innerHTML=
    "üë• "+randomName+" v·ª´a c∆∞·ª£c "+randomBet.toLocaleString();
}
setInterval(fakePlayers,3000);

// B·∫§M L·∫ÆC KHI CLICK X√öC X·∫ÆC
document.getElementById("dice").onclick=startGame;

</script>

</body>
</html>
