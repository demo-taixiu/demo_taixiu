<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Slot 5 C·ªôt</title>
<style>
body{
  margin:0;
  font-family:Arial;
  background:radial-gradient(circle,#400000,#150000);
  color:white;
  text-align:center;
}
.top{
  display:flex;
  justify-content:space-between;
  padding:10px;
  background:#111;
}
.balance, .free{
  font-size:14px;
}
.grid{
  display:grid;
  grid-template-columns:repeat(5,60px);
  gap:5px;
  justify-content:center;
  margin:20px 0;
}
.cell{
  width:60px;
  height:60px;
  background:#222;
  border:2px solid gold;
  border-radius:8px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:28px;
}
button{
  padding:8px 15px;
  margin:5px;
  border:none;
  border-radius:20px;
  font-weight:bold;
}
.spin{background:gold;color:black;}
.auto{background:orange;color:black;}
.fast{background:red;color:white;}
.win-text{
  color:gold;
  font-size:18px;
  height:25px;
}
</style>
</head>
<body>

<div class="top">
<div class="balance">üí∞ <span id="balance">5,000,000</span></div>
<div class="free">FREE: <span id="freeSpin">0</span></div>
</div>

<div class="grid" id="slot"></div>

<div class="win-text" id="winText"></div>

<div>
<button class="spin" onclick="spin()">QUAY</button>
<button class="auto" onclick="toggleAuto()">AUTO</button>
<button class="fast" onclick="toggleSpeed()">NHANH</button>
</div>

<script>
const icons=["üçí","üçã","üíé","7Ô∏è‚É£","‚≠ê"];
let balance=5000000;
let bet=50000;
let freeSpin=0;
let auto=false;
let fast=false;
let spinning=false;

const slot=document.getElementById("slot");

function createGrid(){
  slot.innerHTML="";
  for(let i=0;i<15;i++){
    let div=document.createElement("div");
    div.className="cell";
    div.innerText="‚ùì";
    slot.appendChild(div);
  }
}
createGrid();

function updateUI(){
  balanceEl.innerText=balance.toLocaleString();
  freeSpinEl.innerText=freeSpin;
}
const balanceEl=document.getElementById("balance");
const freeSpinEl=document.getElementById("freeSpin");
const winText=document.getElementById("winText");

function randomIcon(){
  return icons[Math.floor(Math.random()*icons.length)];
}

function spin(){
  if(spinning) return;
  if(balance<bet && freeSpin<=0) return alert("H·∫øt ti·ªÅn!");

  spinning=true;
  winText.innerText="";

  if(freeSpin<=0){
    balance-=bet;
  }else{
    freeSpin--;
  }

  updateUI();

  let speed= fast?50:100;
  let count=0;
  let interval=setInterval(()=>{
    let cells=document.querySelectorAll(".cell");
    cells.forEach(c=>c.innerText=randomIcon());
    count++;
    if(count>15){
      clearInterval(interval);
      checkWin();
      spinning=false;
      if(auto) setTimeout(spin,300);
    }
  },speed);
}

function checkWin(){
  let cells=[...document.querySelectorAll(".cell")].map(c=>c.innerText);

  // t·∫°o ma tr·∫≠n 3 h√†ng √ó 5 c·ªôt
  let grid=[];
  for(let r=0;r<3;r++){
    grid[r]=[];
    for(let c=0;c<5;c++){
      grid[r][c]=cells[r*5+c];
    }
  }

  let win=0;

  // ngang
  for(let r=0;r<3;r++){
    let first=grid[r][0];
    let count=1;
    for(let c=1;c<5;c++){
      if(grid[r][c]===first) count++;
      else break;
    }
    if(count>=3) win+=bet*(count);
  }

  // ch√©o xu·ªëng
  if(grid[0][0]===grid[1][1] && grid[1][1]===grid[2][2]) win+=bet*3;
  if(grid[0][1]===grid[1][2] && grid[1][2]===grid[2][3]) win+=bet*3;
  if(grid[0][2]===grid[1][3] && grid[1][3]===grid[2][4]) win+=bet*3;

  // ch√©o l√™n
  if(grid[2][0]===grid[1][1] && grid[1][1]===grid[0][2]) win+=bet*3;
  if(grid[2][1]===grid[1][2] && grid[1][2]===grid[0][3]) win+=bet*3;
  if(grid[2][2]===grid[1][3] && grid[1][3]===grid[0][4]) win+=bet*3;

  // scatter
  let scatter=cells.filter(x=>x==="‚≠ê").length;
  if(scatter>=3){
    freeSpin+=12;
    winText.innerText="üéÅ FREE 12 V√íNG!";
  }

  if(freeSpin>0) win*=5;

  if(win>0){
    balance+=win;
    winText.innerText+=" +"+win.toLocaleString();
  }

  updateUI();
}

function toggleAuto(){
  auto=!auto;
}

function toggleSpeed(){
  fast=!fast;
}
</script>

</body>
</html>
