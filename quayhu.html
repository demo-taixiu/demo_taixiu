<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Slot 5 C·ªôt</title>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Arial;
  background:radial-gradient(circle,#500000,#1a0000);
  color:white;
  text-align:center;
}

/* TOP */
.top{
  display:flex;
  justify-content:space-between;
  padding:10px;
  background:#111;
  font-size:14px;
}

/* GRID */
.grid{
  display:grid;
  grid-template-columns:repeat(5,1fr);
  gap:5px;
  padding:10px;
  max-width:420px;
  margin:auto;
}
.cell{
  aspect-ratio:1/1;
  background:#222;
  border:2px solid gold;
  border-radius:10px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:28px;
}

/* CHIP */
.chips{
  display:flex;
  justify-content:center;
  flex-wrap:wrap;
  gap:8px;
  padding:10px;
}
.chip{
  background:gold;
  color:black;
  padding:6px 12px;
  border-radius:20px;
  font-size:13px;
}
.chip.active{
  background:red;
  color:white;
}

/* BUTTON */
.controls{
  padding:10px;
}
button{
  padding:8px 18px;
  border:none;
  border-radius:20px;
  margin:5px;
  font-weight:bold;
}
.spin{background:gold;color:black;}
.auto{background:orange;color:black;}
.fast{background:red;color:white;}

.win{
  height:25px;
  color:gold;
}

/* FREE SCREEN */
.freeScreen{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.95);
  display:none;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  z-index:99;
}
.freeBox{
  background:#300;
  padding:30px;
  border:3px solid gold;
  border-radius:15px;
}
.count{
  font-size:24px;
  margin:15px 0;
  color:gold;
}
</style>
</head>
<body>

<div class="top">
<div>üí∞ <span id="balance">5,000,000</span></div>
<div>FREE: <span id="freeSpin">0</span></div>
</div>

<div class="grid" id="slot"></div>

<div class="chips">
<div class="chip active" onclick="setBet(10000,this)">10K</div>
<div class="chip" onclick="setBet(50000,this)">50K</div>
<div class="chip" onclick="setBet(100000,this)">100K</div>
<div class="chip" onclick="setBet(500000,this)">500K</div>
</div>

<div class="controls">
<button class="spin" onclick="spin()">QUAY</button>
<button class="auto" onclick="auto=!auto">AUTO</button>
<button class="fast" onclick="fast=!fast">NHANH</button>
</div>

<div class="win" id="winText"></div>

<!-- FREE SCREEN -->
<div class="freeScreen" id="freeScreen">
  <div class="freeBox">
    <h2>üéÅ FREE 12 V√íNG</h2>
    <div class="count" id="countdown">10</div>
    <button onclick="startFree()">B·∫ÆT ƒê·∫¶U</button>
  </div>
</div>

<script>
const icons=["üçí","üçã","üíé","7Ô∏è‚É£","‚≠ê"];
let balance=5000000;
let bet=10000;
let freeSpin=0;
let auto=false;
let fast=false;
let spinning=false;

const slot=document.getElementById("slot");
const balanceEl=document.getElementById("balance");
const freeSpinEl=document.getElementById("freeSpin");
const winText=document.getElementById("winText");
const freeScreen=document.getElementById("freeScreen");
const countdownEl=document.getElementById("countdown");

/* t·∫°o grid */
function createGrid(){
  slot.innerHTML="";
  for(let i=0;i<15;i++){
    let d=document.createElement("div");
    d.className="cell";
    d.innerText="‚ùì";
    slot.appendChild(d);
  }
}
createGrid();

function updateUI(){
  balanceEl.innerText=balance.toLocaleString();
  freeSpinEl.innerText=freeSpin;
}

function setBet(value,el){
  bet=value;
  document.querySelectorAll(".chip").forEach(c=>c.classList.remove("active"));
  el.classList.add("active");
}

function randomIcon(){
  return icons[Math.floor(Math.random()*icons.length)];
}

function spin(){
  if(spinning) return;
  if(balance<bet && freeSpin<=0) return alert("H·∫øt ti·ªÅn!");

  spinning=true;
  winText.innerText="";

  if(freeSpin<=0) balance-=bet;
  else freeSpin--;

  updateUI();

  let speed=fast?50:100;
  let count=0;

  let interval=setInterval(()=>{
    document.querySelectorAll(".cell").forEach(c=>c.innerText=randomIcon());
    count++;
    if(count>15){
      clearInterval(interval);
      checkWin();
      spinning=false;
      if(auto) setTimeout(spin,300);
    }
  },speed);
}

function checkWin(){
  let cells=[...document.querySelectorAll(".cell")].map(c=>c.innerText);

  let scatter=cells.filter(x=>x==="‚≠ê").length;
  if(scatter>=3){
    showFreeScreen();
  }

  let win=0;
  let grid=[];
  for(let r=0;r<3;r++){
    grid[r]=[];
    for(let c=0;c<5;c++){
      grid[r][c]=cells[r*5+c];
    }
  }

  for(let r=0;r<3;r++){
    let first=grid[r][0];
    let count=1;
    for(let c=1;c<5;c++){
      if(grid[r][c]===first) count++;
      else break;
    }
    if(count>=3) win+=bet*count;
  }

  if(freeSpin>0) win*=5;

  if(win>0){
    balance+=win;
    winText.innerText="+"+win.toLocaleString();
  }

  updateUI();
}

/* FREE MODE */
function showFreeScreen(){
  freeScreen.style.display="flex";
  let time=10;
  countdownEl.innerText=time;

  let cd=setInterval(()=>{
    time--;
    countdownEl.innerText=time;
    if(time<=0){
      clearInterval(cd);
      startFree();
    }
  },1000);
}

function startFree(){
  freeScreen.style.display="none";
  freeSpin=12;
  updateUI();
}
updateUI();
</script>

</body>
</html>
