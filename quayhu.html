<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Slot M·∫°t Ch∆∞·ª£c</title>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Arial;
  background:radial-gradient(circle,#7a0000,#2a0000);
  color:white;
  text-align:center;
}

/* TOP */
.top{
  display:flex;
  justify-content:space-between;
  padding:10px;
  background:#111;
  font-size:14px;
}

/* GRID */
.grid{
  display:grid;
  grid-template-columns:repeat(5,1fr);
  gap:6px;
  padding:10px;
  max-width:420px;
  margin:auto;
}
.cell{
  aspect-ratio:1/1;
  background:#1a1a1a;
  border:3px solid gold;
  border-radius:12px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:24px;
  box-shadow:0 0 10px #000 inset;
}

/* CHIP */
.chips{
  display:flex;
  justify-content:center;
  gap:8px;
  flex-wrap:wrap;
  padding:10px;
}
.chip{
  background:gold;
  color:black;
  padding:6px 14px;
  border-radius:20px;
  font-size:13px;
}
.chip.active{
  background:red;
  color:white;
}

/* BUTTON */
.controls{
  padding:10px;
}
button{
  padding:8px 20px;
  margin:5px;
  border:none;
  border-radius:20px;
  font-weight:bold;
}
.spin{background:gold;color:black;}
.auto{background:orange;color:black;}
.fast{background:red;color:white;}

.win{
  height:25px;
  color:gold;
  font-weight:bold;
}
</style>
</head>
<body>

<div class="top">
<div>üí∞ <span id="balance">10,000,000</span></div>
<div>FREE: <span id="freeSpin">0</span></div>
</div>

<div class="grid" id="slot"></div>

<div class="chips">
<div class="chip active" onclick="setBet(20000,this)">20K</div>
<div class="chip" onclick="setBet(100000,this)">100K</div>
<div class="chip" onclick="setBet(500000,this)">500K</div>
<div class="chip" onclick="setBet(1000000,this)">1M</div>
</div>

<div class="controls">
<button class="spin" onclick="spin()">QUAY</button>
<button class="auto" onclick="auto=!auto">AUTO</button>
<button class="fast" onclick="fast=!fast">NHANH</button>
</div>

<div class="win" id="winText"></div>

<script>
const icons=["üêâ","ü¶Ö","Êù±","Ë•ø","‰∏≠","Áôº","ÁôΩ","‚≠ê"];
let balance=10000000;
let bet=20000;
let freeSpin=0;
let auto=false;
let fast=false;
let spinning=false;

const slot=document.getElementById("slot");
const balanceEl=document.getElementById("balance");
const freeSpinEl=document.getElementById("freeSpin");
const winText=document.getElementById("winText");

function createGrid(){
  slot.innerHTML="";
  for(let i=0;i<15;i++){
    let d=document.createElement("div");
    d.className="cell";
    d.innerText="üÄÑ";
    slot.appendChild(d);
  }
}
createGrid();

function updateUI(){
  balanceEl.innerText=balance.toLocaleString();
  freeSpinEl.innerText=freeSpin;
}

function setBet(value,el){
  bet=value;
  document.querySelectorAll(".chip").forEach(c=>c.classList.remove("active"));
  el.classList.add("active");
}

function randomIcon(){
  return icons[Math.floor(Math.random()*icons.length)];
}

function spin(){
  if(spinning) return;
  if(balance<bet && freeSpin<=0) return alert("H·∫øt ti·ªÅn!");

  spinning=true;
  winText.innerText="";

  if(freeSpin<=0) balance-=bet;
  else freeSpin--;

  updateUI();

  let speed=fast?60:120;
  let count=0;

  let interval=setInterval(()=>{
    document.querySelectorAll(".cell").forEach(c=>c.innerText=randomIcon());
    count++;
    if(count>15){
      clearInterval(interval);
      checkWin();
      spinning=false;
      if(auto) setTimeout(spin,300);
    }
  },speed);
}

function checkWin(){
  let cells=[...document.querySelectorAll(".cell")].map(c=>c.innerText);
  let grid=[];
  for(let r=0;r<3;r++){
    grid[r]=[];
    for(let c=0;c<5;c++){
      grid[r][c]=cells[r*5+c];
    }
  }

  let win=0;

  for(let r=0;r<3;r++){
    let first=grid[r][0];
    let count=1;
    for(let c=1;c<5;c++){
      if(grid[r][c]===first) count++;
      else break;
    }
    if(count>=3) win+=bet*count;
  }

  let scatter=cells.filter(x=>x==="‚≠ê").length;
  if(scatter>=3){
    freeSpin+=10;
    winText.innerText="üéÅ FREE 10 V√íNG!";
  }

  if(freeSpin>0) win*=5;

  if(win>0){
    balance+=win;
    winText.innerText+=" +" + win.toLocaleString();
  }

  updateUI();
}
updateUI();
</script>

</body>
</html>
